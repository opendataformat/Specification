---
title: "Internal_OpenDF: Example"
output:
  github_document:
    toc: true
    toc_depth: 3
---

| Author: Xiaoyao Han, Claudia Saalbach, Knut Wenzig
| Affiliation: DIW Berlin
| Created: 2022-03-01
| Version: v1.0.0
| Last modified: 2022-04-23 Claudia Saalbach
| Licence: This repository is issued under a CC by licence (https://creativecommons.org/licenses/by/4.0/)

---

# Example

This data example is intended to illustrate the main features of the specified Internal Open Data Format (Internal_OpenDF). The example was developed along the lines of the [SOEP-Core study from 2010](https://paneldata.org/soep-core/data/bap/), in which, among other instruments, data were collected using the [Individual Questionnaire](https://paneldata.org/soep-core/inst/soep-core-2010-pe/1). Therefore, the metadata of this example is very similar to that of the SOEP survey, but the response data are fictitious. The response data were generated by random selection. The variable `name` is fictional to have an example for character variables. The responses for the variable `name` stem from the dataset "Vornamen 2013" from the Open Data platform [Offene Daten Köln](https://offenedaten-koeln.de/dataset/vornamen).

Since the Internal_OpenDF specifies both, a data component and a metadata component of a dataset, the document is structured in two main sections: [Data](#data) and [Metadata](#metadata).

## Data

The survey response data is saved in the [data.csv](data.csv) file. The data file contains the seven variables **bap87**, **bap9201**, **bap9001**, **bap9002**, **bap9003**, **bap96** and **name**.

```{r, echo=FALSE, include=TRUE}
data <- read.csv("data.csv",
                 header = TRUE,
                 sep=","
                 )

data[is.na(data)] <- ""

knitr::kable(data,
             caption = 'data.csv holding the raw data'
             )
```

The variables in this example hold different variable types: numeric, character and categorical. Categorical variables are numerical variables with pre-defined labels assigned to values. Solely with the data component of the dataset, categorical variables can not be identified since the value labels are held by the metadata component of the dataset.


<!-- --------------------------------------------------------------------- -->
<!-- --------------------------------------------------------------------- -->
<!-- --------------------------------------------------------------------- -->


## Metadata

For describing the raw data stored in the data.csv file the Internal_OpenDF provides three metadata files: [dataset.csv](dataset.csv), [variables.csv](variables.csv), and [categories.csv](categories.csv). The [dataset.csv](dataset.csv) file
contains general information about the dataset. The [variables.csv](variables.csv) file describes the individual variables of the dataset. The [categories.csv](categories.csv) file contains the predefined values and value labels of categorical variables. The following tables show an example of how the metadata is organized for describing the dataset and exemplified the variable `bap87`. The tables are a snapshot of the CSV tables in this repository.

### Dataset

For providing some general information on the data stored in the [data.csv](data.csv) file, the metadata file [dataset.csv](dataset.csv) offers four columns. The column **dataset** contains the name of the dataset - here `bap`. The **label\_en** column can be used to specify a label in English for the dataset. Equivalent to this, the column **label\_de** contains the German label. For a more comprehensive description of the dataset, the column **description\_en** can be used. For example, information about the study or the measurement instrument can be
entered here. Again, two language versions are possible. **description\_en** for an English description and **description\_de** for a German description.

```{r, echo=FALSE, include=TRUE}
dataset <- read.csv("dataset.csv",
                 header = TRUE,
                 sep=","
                 )

knitr::kable(dataset,
             caption = 'dataset.csv providing information on the data set'
             )
```

### Variables

The CSV file [variables.csv](variables.csv) provides seven columns for describing the variables of the dataset. The column **variable** contains the variable name – e. g. `bap87`. It is possible to specify the variable label in two languages. Column **label\_en** holds the English label - e. g. `Current Health` for the variable `bap87`, and
column **label\_de** contains the German label (`Gesundheitszustand gegenwärtig`). Column `type` describes the variable type. Entering `byte` declares the variable as `numeric`, entering `string` marks a `character`variable.

```{r, echo=FALSE, include=TRUE}
variable <- read.csv("variables.csv",
                 header = TRUE,
                 sep=","
                 )

knitr::kable(variable[1,],
             caption = 'Row from variables.csv describing the variable bap87 stored
in data.csv'
             )
```

The columns **description\_en** (English) and **description\_de** (German) reserve space for a more comprehensive description of the variables. The **url** column holds a link to an external website, such as a data portal, that provides detailed information about the variable (e. g. descriptive statistics, methodological or technical reports, documentation of the measurement instrument).

### Variable Values & Value Labels

Categorical variables are defined by a set of values and value labels. Within the Internal_OpenDF, categorical variables relate to an additional file - namely the [categories.csv](categories.csv) file, which holds the pre-defined values within the column **value**, and respective labels within the columns **label\_en** (English) and **label\_de** (German).

```{r, echo=FALSE, include=TRUE}
category <- read.csv("categories.csv",
                 header = TRUE,
                 sep=","
                 )

knitr::kable(category[1:7,],
             caption = 'Rows from categories.csv holding the values and value labels of the variable bap87 stored in data.csv'
             )
```

In this example the variable `bap87` can take the values  `-2` to `5`, labeled from `No Answer` over `Very good` to `Bad`. Which values are used as user-defined missings depends on the data user's interpretation of the value labels. The files [variables.csv](variables.csv) and [categories.csv](categories.csv) are connected via the column variable.


